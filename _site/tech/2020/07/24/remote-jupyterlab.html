<!DOCTYPE html>
<html lang="EN">
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<title>Remote jupyterlab without SSH and sudo - Linlin</title>
<meta name="description" content="Disclaimer: this guideline is only suggested for servers within secure local connections, e.g. within an institution or corporation’s network.SSH port forwar...">
<link rel="canonical" href="http://localhost:4000/tech/2020/07/24/remote-jupyterlab.html">
<link rel="alternate" type="application/rss+xml" title="Linlin" href="http://localhost:4000/feed.xml">

        <!--
    for Safari on iOS
    https://developer.apple.com/ios/human-interface-guidelines/icons-and-images/app-icon/
-->
<link rel="apple-touch-icon" sizes="180x180" href="/statics/images/logo/icon-180x180.png">
<link rel="apple-touch-icon" sizes="167x167" href="/statics/images/logo/icon-167x167.png">
<link rel="apple-touch-icon" sizes="152x152" href="/statics/images/logo/icon-152x152.png">
<link rel="apple-touch-icon" sizes="120x120" href="/statics/images/logo/icon-120x120.png">
<link rel="shortcut icon" href="/statics/images/logo/icon-120x120.png">
<!--
    for Chrome on Android
    https://developer.chrome.com/multidevice/android/installtohomescreen
-->
<meta name="mobile-web-app-capable" content="yes">
<link rel="icon" sizes="192x192" href="/statics/images/logo/icon-192x192.png">
<!--
    for Edge on Windows 10
    https://msdn.microsoft.com/en-us/library/dn255024(v=vs.85).aspx
-->
<meta name="msapplication-TileImage" content="/statics/images/logo/icon-144x144.png">
<meta name="msapplication-square310x310logo" content="/statics/images/icon-310x310.png">
<meta name="msapplication-wide310x150logo" content="/statics/images/icon-310x150.png">
<meta name="msapplication-square150x150logo" content="/statics/images/icon-150x150.png">
<meta name="msapplication-square70x70logo" content="/statics/images/icon-70x70.png">
<meta name="msapplication-TileColor" content="#eeeeee">
        <link rel="stylesheet" href="/statics/css/blog.css">
        <style>
            
        </style>
        <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Remote jupyterlab without SSH and sudo | Linlin</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Remote jupyterlab without SSH and sudo" />
<meta name="author" content="Linlin Zhao | 恒道恒名 上下求索" />
<meta property="og:locale" content="EN" />
<meta name="description" content="Disclaimer: this guideline is only suggested for servers within secure local connections, e.g. within an institution or corporation’s network. SSH port forwarding is a common way of connecting to remote jupyter notebooks. This typically takes three steps: run jupyter on the server, ssh tunneling to the jupyter instance, and then type the localhost link to your browser. That actually doesn’t sound satisfying, and it could be simpler. In this post, I’ll guide you through setting up a remote jupyterlab workspace for Python3 from scratch. Since you want to set remote notebooks, I’ll assume you feel comfortable with command lines and remote editing. Check your python version on server As of 2020, Python3 is strongly recommended. If you are using RedHat Enterprise 7, the system-wide default version is Python2.7, but your system administrator usually should have installed python3. Suppose python3.6 is installed, you can enable python3 by scl enable rh-python36 bash. If you are using Debian or Ubuntu, python3 comes with the system. In case you want to make python3 as default, add the following line to your .bashrc file: alias python=python3 Manage python environments Working with python virtual environments is good practice. Here venv module and conda are briefly introduced, which use pip and conda as package manager respectively. This post from Anaconda summarizes the differences between pip and conda nicely. Note that pip and conda are direct competitors in terms of managing packages. Within a venv environment, doing pip install conda wouldn’t give you a standalone conda command for your venv environment. The venv way cd to your project directory, e.g. “myProject” Create virtual environments: python -m venv project-venv Activate the environments: source ./project-venv/bin/activate Install packages to the venv with pip, e.g. pip install jupyterlab To quit the venv: deactivate The conda way Go to home folder: cd $HOME Create a temporary folder to keep home folder clean: mkdir temp &amp;&amp; cd temp Get the anaconda or miniconda linux installer, e.g. for Anaconda3: wget https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh Install the downloaded: TMPDIR=./ bash ./Anaconda3-2020.07-Linux-x86_64.sh. Note that TMPDIR is specified to avoid permission issue caused by limited space of the default TMPDIR. Hit enter until you are asked to type “yes”. The default path is usually $HOME/anaconda3/ At the end of installation, say “yes” to have conda initializer. But that would set Anaconda python3 as your default python Logout and login again, you’ll enter the conda base environment. If you hate anaconda to change your default python and automatically activate base environment like me, run this command to remedy: conda config --set auto_activate_base false Create conda virtual environment: conda create -n myCondaEnv python=3.7 anaconda Activate environment conda activate myCondaEnv Intall packages to myCondaEnv, including conda install jupyterlab Configure Jupyter Up to this point, you are set to use ssh tunneling for remote connecting, but we can get around that by a few configurations for jupyter notebooks. Generate jupyter notebook configuration file jupyter notebook --generate-config This command creates a configuration file at $HOME/.jupyter/jupyter_notebook_config.py with all defaults commented out. Customize the config file Put the following lines to jupyter_notebook_config.py: c = get_config() c.NotebookApp.ip = &#39;*&#39; #use the system IP address for accessing c.NotebookApp.port = 8890 #if the specified port is occupied,incrementally get next one c.NotebookApp.open_browser = False #no browser from IPython.lib import passwd password = passwd(&quot;yourpassword&quot;) c.NotebookApp.password = password #use password instead of access token. To avoid hard-coding your password to a file, comment last three lines to disable password. Then Juypyter will generate a one-time token for accessing the jupyterlab instance. Run jupyterlab in the background nohup jupyter lab &amp; This command will run jupyterlab in the background, and the printouts will be forwarded to a generated file “nohup.out” in which you will see something like this [I 16:45:57.163 LabApp] http://yourIPorDomainName:8890/ This is your accesible link to the jupyter instance. Now you can safely logout the server. If you choose to use token for accessing, you’ll need to copy the full link with token to your browser. And the token will be used to set a cookie for your browser. Connect to remote jupyterlab Type http://yourIPorDomainName:8890/ or link with token in your browser. You’ll be asked to enter the password you have put into the jupyter config file on the server. Now enjoy working with the remote jupyterlab. As long as the server is running, you only need the link to access. Kill the process of jupyterlab if needed You might want to kill the process at some point. With this command you can find the pid of process for jupyterlab: netstat -tulpn | grep &#39;8890&#39; Then use top or kill command to end the process. Manage multiple environments in one Jupyter instance You’ll probably notice that starting a Jupyter instance for every environment is actually annoying, because we often times need to work on several projects with different settings. It is better that one can link conda environments to ipython kernels such that the environments can show up in one jupyter instance. For instance, I use miniconda3, and conda env list tells me following: base * /path/to/miniconda3 rdkit /path/to/miniconda3/envs/rdkit yolo /path/to/miniconda3/envs/yolo The idea is that when I start a jupyterlab instance in the base environment, I can also access rdkit and yolo envs. conda activate base conda install ipykernel ipython kernel install --user --name=yolo ipython kernel install --user --name=rdkit Next step is to make sure the ipython kernels are linked to the right envs, for example, in the json file .local/share/jupyter/kernels/rdkit/kernel.json, the first entry for argv should point to /path/to/miniconda3/envs/rdkit. If not, change that accordingly. Now rdkit and yolo will show up in jupyterlab. The end The method has been tested on RHEL7 and Debian servers. It also works for Windows Subsystems for Linux (WSL) Ubuntu 18.04. For downloading files from remote, besides scp, you can right click the file to create a downloadable link in jupyterlab. Hope you’ll find this guide helpful." />
<meta property="og:description" content="Disclaimer: this guideline is only suggested for servers within secure local connections, e.g. within an institution or corporation’s network. SSH port forwarding is a common way of connecting to remote jupyter notebooks. This typically takes three steps: run jupyter on the server, ssh tunneling to the jupyter instance, and then type the localhost link to your browser. That actually doesn’t sound satisfying, and it could be simpler. In this post, I’ll guide you through setting up a remote jupyterlab workspace for Python3 from scratch. Since you want to set remote notebooks, I’ll assume you feel comfortable with command lines and remote editing. Check your python version on server As of 2020, Python3 is strongly recommended. If you are using RedHat Enterprise 7, the system-wide default version is Python2.7, but your system administrator usually should have installed python3. Suppose python3.6 is installed, you can enable python3 by scl enable rh-python36 bash. If you are using Debian or Ubuntu, python3 comes with the system. In case you want to make python3 as default, add the following line to your .bashrc file: alias python=python3 Manage python environments Working with python virtual environments is good practice. Here venv module and conda are briefly introduced, which use pip and conda as package manager respectively. This post from Anaconda summarizes the differences between pip and conda nicely. Note that pip and conda are direct competitors in terms of managing packages. Within a venv environment, doing pip install conda wouldn’t give you a standalone conda command for your venv environment. The venv way cd to your project directory, e.g. “myProject” Create virtual environments: python -m venv project-venv Activate the environments: source ./project-venv/bin/activate Install packages to the venv with pip, e.g. pip install jupyterlab To quit the venv: deactivate The conda way Go to home folder: cd $HOME Create a temporary folder to keep home folder clean: mkdir temp &amp;&amp; cd temp Get the anaconda or miniconda linux installer, e.g. for Anaconda3: wget https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh Install the downloaded: TMPDIR=./ bash ./Anaconda3-2020.07-Linux-x86_64.sh. Note that TMPDIR is specified to avoid permission issue caused by limited space of the default TMPDIR. Hit enter until you are asked to type “yes”. The default path is usually $HOME/anaconda3/ At the end of installation, say “yes” to have conda initializer. But that would set Anaconda python3 as your default python Logout and login again, you’ll enter the conda base environment. If you hate anaconda to change your default python and automatically activate base environment like me, run this command to remedy: conda config --set auto_activate_base false Create conda virtual environment: conda create -n myCondaEnv python=3.7 anaconda Activate environment conda activate myCondaEnv Intall packages to myCondaEnv, including conda install jupyterlab Configure Jupyter Up to this point, you are set to use ssh tunneling for remote connecting, but we can get around that by a few configurations for jupyter notebooks. Generate jupyter notebook configuration file jupyter notebook --generate-config This command creates a configuration file at $HOME/.jupyter/jupyter_notebook_config.py with all defaults commented out. Customize the config file Put the following lines to jupyter_notebook_config.py: c = get_config() c.NotebookApp.ip = &#39;*&#39; #use the system IP address for accessing c.NotebookApp.port = 8890 #if the specified port is occupied,incrementally get next one c.NotebookApp.open_browser = False #no browser from IPython.lib import passwd password = passwd(&quot;yourpassword&quot;) c.NotebookApp.password = password #use password instead of access token. To avoid hard-coding your password to a file, comment last three lines to disable password. Then Juypyter will generate a one-time token for accessing the jupyterlab instance. Run jupyterlab in the background nohup jupyter lab &amp; This command will run jupyterlab in the background, and the printouts will be forwarded to a generated file “nohup.out” in which you will see something like this [I 16:45:57.163 LabApp] http://yourIPorDomainName:8890/ This is your accesible link to the jupyter instance. Now you can safely logout the server. If you choose to use token for accessing, you’ll need to copy the full link with token to your browser. And the token will be used to set a cookie for your browser. Connect to remote jupyterlab Type http://yourIPorDomainName:8890/ or link with token in your browser. You’ll be asked to enter the password you have put into the jupyter config file on the server. Now enjoy working with the remote jupyterlab. As long as the server is running, you only need the link to access. Kill the process of jupyterlab if needed You might want to kill the process at some point. With this command you can find the pid of process for jupyterlab: netstat -tulpn | grep &#39;8890&#39; Then use top or kill command to end the process. Manage multiple environments in one Jupyter instance You’ll probably notice that starting a Jupyter instance for every environment is actually annoying, because we often times need to work on several projects with different settings. It is better that one can link conda environments to ipython kernels such that the environments can show up in one jupyter instance. For instance, I use miniconda3, and conda env list tells me following: base * /path/to/miniconda3 rdkit /path/to/miniconda3/envs/rdkit yolo /path/to/miniconda3/envs/yolo The idea is that when I start a jupyterlab instance in the base environment, I can also access rdkit and yolo envs. conda activate base conda install ipykernel ipython kernel install --user --name=yolo ipython kernel install --user --name=rdkit Next step is to make sure the ipython kernels are linked to the right envs, for example, in the json file .local/share/jupyter/kernels/rdkit/kernel.json, the first entry for argv should point to /path/to/miniconda3/envs/rdkit. If not, change that accordingly. Now rdkit and yolo will show up in jupyterlab. The end The method has been tested on RHEL7 and Debian servers. It also works for Windows Subsystems for Linux (WSL) Ubuntu 18.04. For downloading files from remote, besides scp, you can right click the file to create a downloadable link in jupyterlab. Hope you’ll find this guide helpful." />
<link rel="canonical" href="http://localhost:4000/tech/2020/07/24/remote-jupyterlab.html" />
<meta property="og:url" content="http://localhost:4000/tech/2020/07/24/remote-jupyterlab.html" />
<meta property="og:site_name" content="Linlin" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-07-24T00:00:00+00:00" />
<script type="application/ld+json">
{"description":"Disclaimer: this guideline is only suggested for servers within secure local connections, e.g. within an institution or corporation’s network. SSH port forwarding is a common way of connecting to remote jupyter notebooks. This typically takes three steps: run jupyter on the server, ssh tunneling to the jupyter instance, and then type the localhost link to your browser. That actually doesn’t sound satisfying, and it could be simpler. In this post, I’ll guide you through setting up a remote jupyterlab workspace for Python3 from scratch. Since you want to set remote notebooks, I’ll assume you feel comfortable with command lines and remote editing. Check your python version on server As of 2020, Python3 is strongly recommended. If you are using RedHat Enterprise 7, the system-wide default version is Python2.7, but your system administrator usually should have installed python3. Suppose python3.6 is installed, you can enable python3 by scl enable rh-python36 bash. If you are using Debian or Ubuntu, python3 comes with the system. In case you want to make python3 as default, add the following line to your .bashrc file: alias python=python3 Manage python environments Working with python virtual environments is good practice. Here venv module and conda are briefly introduced, which use pip and conda as package manager respectively. This post from Anaconda summarizes the differences between pip and conda nicely. Note that pip and conda are direct competitors in terms of managing packages. Within a venv environment, doing pip install conda wouldn’t give you a standalone conda command for your venv environment. The venv way cd to your project directory, e.g. “myProject” Create virtual environments: python -m venv project-venv Activate the environments: source ./project-venv/bin/activate Install packages to the venv with pip, e.g. pip install jupyterlab To quit the venv: deactivate The conda way Go to home folder: cd $HOME Create a temporary folder to keep home folder clean: mkdir temp &amp;&amp; cd temp Get the anaconda or miniconda linux installer, e.g. for Anaconda3: wget https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh Install the downloaded: TMPDIR=./ bash ./Anaconda3-2020.07-Linux-x86_64.sh. Note that TMPDIR is specified to avoid permission issue caused by limited space of the default TMPDIR. Hit enter until you are asked to type “yes”. The default path is usually $HOME/anaconda3/ At the end of installation, say “yes” to have conda initializer. But that would set Anaconda python3 as your default python Logout and login again, you’ll enter the conda base environment. If you hate anaconda to change your default python and automatically activate base environment like me, run this command to remedy: conda config --set auto_activate_base false Create conda virtual environment: conda create -n myCondaEnv python=3.7 anaconda Activate environment conda activate myCondaEnv Intall packages to myCondaEnv, including conda install jupyterlab Configure Jupyter Up to this point, you are set to use ssh tunneling for remote connecting, but we can get around that by a few configurations for jupyter notebooks. Generate jupyter notebook configuration file jupyter notebook --generate-config This command creates a configuration file at $HOME/.jupyter/jupyter_notebook_config.py with all defaults commented out. Customize the config file Put the following lines to jupyter_notebook_config.py: c = get_config() c.NotebookApp.ip = &#39;*&#39; #use the system IP address for accessing c.NotebookApp.port = 8890 #if the specified port is occupied,incrementally get next one c.NotebookApp.open_browser = False #no browser from IPython.lib import passwd password = passwd(&quot;yourpassword&quot;) c.NotebookApp.password = password #use password instead of access token. To avoid hard-coding your password to a file, comment last three lines to disable password. Then Juypyter will generate a one-time token for accessing the jupyterlab instance. Run jupyterlab in the background nohup jupyter lab &amp; This command will run jupyterlab in the background, and the printouts will be forwarded to a generated file “nohup.out” in which you will see something like this [I 16:45:57.163 LabApp] http://yourIPorDomainName:8890/ This is your accesible link to the jupyter instance. Now you can safely logout the server. If you choose to use token for accessing, you’ll need to copy the full link with token to your browser. And the token will be used to set a cookie for your browser. Connect to remote jupyterlab Type http://yourIPorDomainName:8890/ or link with token in your browser. You’ll be asked to enter the password you have put into the jupyter config file on the server. Now enjoy working with the remote jupyterlab. As long as the server is running, you only need the link to access. Kill the process of jupyterlab if needed You might want to kill the process at some point. With this command you can find the pid of process for jupyterlab: netstat -tulpn | grep &#39;8890&#39; Then use top or kill command to end the process. Manage multiple environments in one Jupyter instance You’ll probably notice that starting a Jupyter instance for every environment is actually annoying, because we often times need to work on several projects with different settings. It is better that one can link conda environments to ipython kernels such that the environments can show up in one jupyter instance. For instance, I use miniconda3, and conda env list tells me following: base * /path/to/miniconda3 rdkit /path/to/miniconda3/envs/rdkit yolo /path/to/miniconda3/envs/yolo The idea is that when I start a jupyterlab instance in the base environment, I can also access rdkit and yolo envs. conda activate base conda install ipykernel ipython kernel install --user --name=yolo ipython kernel install --user --name=rdkit Next step is to make sure the ipython kernels are linked to the right envs, for example, in the json file .local/share/jupyter/kernels/rdkit/kernel.json, the first entry for argv should point to /path/to/miniconda3/envs/rdkit. If not, change that accordingly. Now rdkit and yolo will show up in jupyterlab. The end The method has been tested on RHEL7 and Debian servers. It also works for Windows Subsystems for Linux (WSL) Ubuntu 18.04. For downloading files from remote, besides scp, you can right click the file to create a downloadable link in jupyterlab. Hope you’ll find this guide helpful.","url":"http://localhost:4000/tech/2020/07/24/remote-jupyterlab.html","@type":"BlogPosting","headline":"Remote jupyterlab without SSH and sudo","dateModified":"2020-07-24T00:00:00+00:00","datePublished":"2020-07-24T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/tech/2020/07/24/remote-jupyterlab.html"},"author":{"@type":"Person","name":"Linlin Zhao | 恒道恒名 上下求索"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

        <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
    </head>
    <body>
        <div class="m-page-stage js-page-stage">
            <div class="m-page-content">
    <header class="m-page-header main clearfix">
    <a class="site-title" title="恒道恒名，上下求索"
        href="/blog">Linlin's blog
    </a>
    <div class="site-logo">
        <?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="7pt" height="7pt" viewBox="0 0 7 7" version="1.1">
<g id="surface1">
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,100%,100%);fill-opacity:1;" d="M 6.738281 3.375 C 6.738281 5.21875 5.242188 6.714844 3.398438 6.714844 C 1.554688 6.714844 0.0625 5.21875 0.0625 3.375 C 0.0625 1.535156 1.554688 0.0390625 3.398438 0.0390625 C 5.242188 0.0390625 6.738281 1.535156 6.738281 3.375 Z M 6.738281 3.375 "/>
<path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 3.152344 6.726562 C 1.707031 6.652344 0.402344 5.527344 0.105469 4.113281 C -0.167969 2.929688 0.261719 1.625 1.1875 0.839844 C 1.84375 0.269531 2.726562 -0.03125 3.597656 0.0351562 C 4.972656 0.0898438 6.234375 1.109375 6.605469 2.433594 C 6.753906 2.917969 6.753906 3.441406 6.695312 3.941406 C 6.484375 5.21875 5.480469 6.320312 4.222656 6.628906 C 3.875 6.714844 3.507812 6.757812 3.152344 6.726562 Z M 2.636719 6.523438 C 2.023438 6.21875 1.644531 5.523438 1.730469 4.84375 C 1.800781 4.046875 2.527344 3.382812 3.328125 3.371094 C 3.996094 3.390625 4.65625 2.972656 4.902344 2.347656 C 5.195312 1.65625 4.941406 0.796875 4.324219 0.375 C 3.816406 0 3.136719 0.078125 2.558594 0.210938 C 1.222656 0.539062 0.191406 1.789062 0.117188 3.160156 C 0.0195312 4.398438 0.699219 5.648438 1.792969 6.238281 C 2.066406 6.386719 2.453125 6.558594 2.707031 6.5625 L 2.679688 6.542969 Z M 3.289062 2.128906 C 2.953125 2.066406 2.847656 1.570312 3.140625 1.378906 C 3.441406 1.148438 3.910156 1.464844 3.789062 1.832031 C 3.738281 2.046875 3.503906 2.179688 3.289062 2.128906 Z M 3.460938 5.421875 C 3.875 5.371094 3.882812 4.707031 3.46875 4.644531 C 3.144531 4.558594 2.859375 4.96875 3.050781 5.246094 C 3.132812 5.371094 3.308594 5.46875 3.460938 5.421875 Z M 3.460938 5.421875 "/>
</g>
</svg>

    </div>
    <nav>
        <ul class="inline-list">
            <li><a href="/">Home</a></li>
            <li><a
                href="/blog/all.html?tag=">All
            </a></li>
            
                <li><a href="/blog/about.html"> About </a></li>
            
            <!-- <li><a type="application/rss+xml"
                href="/feed.xml">RSS
            </a></li> -->
        </ul>
    </nav>
</header>

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Remote jupyterlab without SSH and sudo | Linlin</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Remote jupyterlab without SSH and sudo" />
<meta name="author" content="Linlin Zhao | 恒道恒名 上下求索" />
<meta property="og:locale" content="EN" />
<meta name="description" content="Disclaimer: this guideline is only suggested for servers within secure local connections, e.g. within an institution or corporation’s network. SSH port forwarding is a common way of connecting to remote jupyter notebooks. This typically takes three steps: run jupyter on the server, ssh tunneling to the jupyter instance, and then type the localhost link to your browser. That actually doesn’t sound satisfying, and it could be simpler. In this post, I’ll guide you through setting up a remote jupyterlab workspace for Python3 from scratch. Since you want to set remote notebooks, I’ll assume you feel comfortable with command lines and remote editing. Check your python version on server As of 2020, Python3 is strongly recommended. If you are using RedHat Enterprise 7, the system-wide default version is Python2.7, but your system administrator usually should have installed python3. Suppose python3.6 is installed, you can enable python3 by scl enable rh-python36 bash. If you are using Debian or Ubuntu, python3 comes with the system. In case you want to make python3 as default, add the following line to your .bashrc file: alias python=python3 Manage python environments Working with python virtual environments is good practice. Here venv module and conda are briefly introduced, which use pip and conda as package manager respectively. This post from Anaconda summarizes the differences between pip and conda nicely. Note that pip and conda are direct competitors in terms of managing packages. Within a venv environment, doing pip install conda wouldn’t give you a standalone conda command for your venv environment. The venv way cd to your project directory, e.g. “myProject” Create virtual environments: python -m venv project-venv Activate the environments: source ./project-venv/bin/activate Install packages to the venv with pip, e.g. pip install jupyterlab To quit the venv: deactivate The conda way Go to home folder: cd $HOME Create a temporary folder to keep home folder clean: mkdir temp &amp;&amp; cd temp Get the anaconda or miniconda linux installer, e.g. for Anaconda3: wget https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh Install the downloaded: TMPDIR=./ bash ./Anaconda3-2020.07-Linux-x86_64.sh. Note that TMPDIR is specified to avoid permission issue caused by limited space of the default TMPDIR. Hit enter until you are asked to type “yes”. The default path is usually $HOME/anaconda3/ At the end of installation, say “yes” to have conda initializer. But that would set Anaconda python3 as your default python Logout and login again, you’ll enter the conda base environment. If you hate anaconda to change your default python and automatically activate base environment like me, run this command to remedy: conda config --set auto_activate_base false Create conda virtual environment: conda create -n myCondaEnv python=3.7 anaconda Activate environment conda activate myCondaEnv Intall packages to myCondaEnv, including conda install jupyterlab Configure Jupyter Up to this point, you are set to use ssh tunneling for remote connecting, but we can get around that by a few configurations for jupyter notebooks. Generate jupyter notebook configuration file jupyter notebook --generate-config This command creates a configuration file at $HOME/.jupyter/jupyter_notebook_config.py with all defaults commented out. Customize the config file Put the following lines to jupyter_notebook_config.py: c = get_config() c.NotebookApp.ip = &#39;*&#39; #use the system IP address for accessing c.NotebookApp.port = 8890 #if the specified port is occupied,incrementally get next one c.NotebookApp.open_browser = False #no browser from IPython.lib import passwd password = passwd(&quot;yourpassword&quot;) c.NotebookApp.password = password #use password instead of access token. To avoid hard-coding your password to a file, comment last three lines to disable password. Then Juypyter will generate a one-time token for accessing the jupyterlab instance. Run jupyterlab in the background nohup jupyter lab &amp; This command will run jupyterlab in the background, and the printouts will be forwarded to a generated file “nohup.out” in which you will see something like this [I 16:45:57.163 LabApp] http://yourIPorDomainName:8890/ This is your accesible link to the jupyter instance. Now you can safely logout the server. If you choose to use token for accessing, you’ll need to copy the full link with token to your browser. And the token will be used to set a cookie for your browser. Connect to remote jupyterlab Type http://yourIPorDomainName:8890/ or link with token in your browser. You’ll be asked to enter the password you have put into the jupyter config file on the server. Now enjoy working with the remote jupyterlab. As long as the server is running, you only need the link to access. Kill the process of jupyterlab if needed You might want to kill the process at some point. With this command you can find the pid of process for jupyterlab: netstat -tulpn | grep &#39;8890&#39; Then use top or kill command to end the process. Manage multiple environments in one Jupyter instance You’ll probably notice that starting a Jupyter instance for every environment is actually annoying, because we often times need to work on several projects with different settings. It is better that one can link conda environments to ipython kernels such that the environments can show up in one jupyter instance. For instance, I use miniconda3, and conda env list tells me following: base * /path/to/miniconda3 rdkit /path/to/miniconda3/envs/rdkit yolo /path/to/miniconda3/envs/yolo The idea is that when I start a jupyterlab instance in the base environment, I can also access rdkit and yolo envs. conda activate base conda install ipykernel ipython kernel install --user --name=yolo ipython kernel install --user --name=rdkit Next step is to make sure the ipython kernels are linked to the right envs, for example, in the json file .local/share/jupyter/kernels/rdkit/kernel.json, the first entry for argv should point to /path/to/miniconda3/envs/rdkit. If not, change that accordingly. Now rdkit and yolo will show up in jupyterlab. The end The method has been tested on RHEL7 and Debian servers. It also works for Windows Subsystems for Linux (WSL) Ubuntu 18.04. For downloading files from remote, besides scp, you can right click the file to create a downloadable link in jupyterlab. Hope you’ll find this guide helpful." />
<meta property="og:description" content="Disclaimer: this guideline is only suggested for servers within secure local connections, e.g. within an institution or corporation’s network. SSH port forwarding is a common way of connecting to remote jupyter notebooks. This typically takes three steps: run jupyter on the server, ssh tunneling to the jupyter instance, and then type the localhost link to your browser. That actually doesn’t sound satisfying, and it could be simpler. In this post, I’ll guide you through setting up a remote jupyterlab workspace for Python3 from scratch. Since you want to set remote notebooks, I’ll assume you feel comfortable with command lines and remote editing. Check your python version on server As of 2020, Python3 is strongly recommended. If you are using RedHat Enterprise 7, the system-wide default version is Python2.7, but your system administrator usually should have installed python3. Suppose python3.6 is installed, you can enable python3 by scl enable rh-python36 bash. If you are using Debian or Ubuntu, python3 comes with the system. In case you want to make python3 as default, add the following line to your .bashrc file: alias python=python3 Manage python environments Working with python virtual environments is good practice. Here venv module and conda are briefly introduced, which use pip and conda as package manager respectively. This post from Anaconda summarizes the differences between pip and conda nicely. Note that pip and conda are direct competitors in terms of managing packages. Within a venv environment, doing pip install conda wouldn’t give you a standalone conda command for your venv environment. The venv way cd to your project directory, e.g. “myProject” Create virtual environments: python -m venv project-venv Activate the environments: source ./project-venv/bin/activate Install packages to the venv with pip, e.g. pip install jupyterlab To quit the venv: deactivate The conda way Go to home folder: cd $HOME Create a temporary folder to keep home folder clean: mkdir temp &amp;&amp; cd temp Get the anaconda or miniconda linux installer, e.g. for Anaconda3: wget https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh Install the downloaded: TMPDIR=./ bash ./Anaconda3-2020.07-Linux-x86_64.sh. Note that TMPDIR is specified to avoid permission issue caused by limited space of the default TMPDIR. Hit enter until you are asked to type “yes”. The default path is usually $HOME/anaconda3/ At the end of installation, say “yes” to have conda initializer. But that would set Anaconda python3 as your default python Logout and login again, you’ll enter the conda base environment. If you hate anaconda to change your default python and automatically activate base environment like me, run this command to remedy: conda config --set auto_activate_base false Create conda virtual environment: conda create -n myCondaEnv python=3.7 anaconda Activate environment conda activate myCondaEnv Intall packages to myCondaEnv, including conda install jupyterlab Configure Jupyter Up to this point, you are set to use ssh tunneling for remote connecting, but we can get around that by a few configurations for jupyter notebooks. Generate jupyter notebook configuration file jupyter notebook --generate-config This command creates a configuration file at $HOME/.jupyter/jupyter_notebook_config.py with all defaults commented out. Customize the config file Put the following lines to jupyter_notebook_config.py: c = get_config() c.NotebookApp.ip = &#39;*&#39; #use the system IP address for accessing c.NotebookApp.port = 8890 #if the specified port is occupied,incrementally get next one c.NotebookApp.open_browser = False #no browser from IPython.lib import passwd password = passwd(&quot;yourpassword&quot;) c.NotebookApp.password = password #use password instead of access token. To avoid hard-coding your password to a file, comment last three lines to disable password. Then Juypyter will generate a one-time token for accessing the jupyterlab instance. Run jupyterlab in the background nohup jupyter lab &amp; This command will run jupyterlab in the background, and the printouts will be forwarded to a generated file “nohup.out” in which you will see something like this [I 16:45:57.163 LabApp] http://yourIPorDomainName:8890/ This is your accesible link to the jupyter instance. Now you can safely logout the server. If you choose to use token for accessing, you’ll need to copy the full link with token to your browser. And the token will be used to set a cookie for your browser. Connect to remote jupyterlab Type http://yourIPorDomainName:8890/ or link with token in your browser. You’ll be asked to enter the password you have put into the jupyter config file on the server. Now enjoy working with the remote jupyterlab. As long as the server is running, you only need the link to access. Kill the process of jupyterlab if needed You might want to kill the process at some point. With this command you can find the pid of process for jupyterlab: netstat -tulpn | grep &#39;8890&#39; Then use top or kill command to end the process. Manage multiple environments in one Jupyter instance You’ll probably notice that starting a Jupyter instance for every environment is actually annoying, because we often times need to work on several projects with different settings. It is better that one can link conda environments to ipython kernels such that the environments can show up in one jupyter instance. For instance, I use miniconda3, and conda env list tells me following: base * /path/to/miniconda3 rdkit /path/to/miniconda3/envs/rdkit yolo /path/to/miniconda3/envs/yolo The idea is that when I start a jupyterlab instance in the base environment, I can also access rdkit and yolo envs. conda activate base conda install ipykernel ipython kernel install --user --name=yolo ipython kernel install --user --name=rdkit Next step is to make sure the ipython kernels are linked to the right envs, for example, in the json file .local/share/jupyter/kernels/rdkit/kernel.json, the first entry for argv should point to /path/to/miniconda3/envs/rdkit. If not, change that accordingly. Now rdkit and yolo will show up in jupyterlab. The end The method has been tested on RHEL7 and Debian servers. It also works for Windows Subsystems for Linux (WSL) Ubuntu 18.04. For downloading files from remote, besides scp, you can right click the file to create a downloadable link in jupyterlab. Hope you’ll find this guide helpful." />
<link rel="canonical" href="http://localhost:4000/tech/2020/07/24/remote-jupyterlab.html" />
<meta property="og:url" content="http://localhost:4000/tech/2020/07/24/remote-jupyterlab.html" />
<meta property="og:site_name" content="Linlin" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-07-24T00:00:00+00:00" />
<script type="application/ld+json">
{"description":"Disclaimer: this guideline is only suggested for servers within secure local connections, e.g. within an institution or corporation’s network. SSH port forwarding is a common way of connecting to remote jupyter notebooks. This typically takes three steps: run jupyter on the server, ssh tunneling to the jupyter instance, and then type the localhost link to your browser. That actually doesn’t sound satisfying, and it could be simpler. In this post, I’ll guide you through setting up a remote jupyterlab workspace for Python3 from scratch. Since you want to set remote notebooks, I’ll assume you feel comfortable with command lines and remote editing. Check your python version on server As of 2020, Python3 is strongly recommended. If you are using RedHat Enterprise 7, the system-wide default version is Python2.7, but your system administrator usually should have installed python3. Suppose python3.6 is installed, you can enable python3 by scl enable rh-python36 bash. If you are using Debian or Ubuntu, python3 comes with the system. In case you want to make python3 as default, add the following line to your .bashrc file: alias python=python3 Manage python environments Working with python virtual environments is good practice. Here venv module and conda are briefly introduced, which use pip and conda as package manager respectively. This post from Anaconda summarizes the differences between pip and conda nicely. Note that pip and conda are direct competitors in terms of managing packages. Within a venv environment, doing pip install conda wouldn’t give you a standalone conda command for your venv environment. The venv way cd to your project directory, e.g. “myProject” Create virtual environments: python -m venv project-venv Activate the environments: source ./project-venv/bin/activate Install packages to the venv with pip, e.g. pip install jupyterlab To quit the venv: deactivate The conda way Go to home folder: cd $HOME Create a temporary folder to keep home folder clean: mkdir temp &amp;&amp; cd temp Get the anaconda or miniconda linux installer, e.g. for Anaconda3: wget https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh Install the downloaded: TMPDIR=./ bash ./Anaconda3-2020.07-Linux-x86_64.sh. Note that TMPDIR is specified to avoid permission issue caused by limited space of the default TMPDIR. Hit enter until you are asked to type “yes”. The default path is usually $HOME/anaconda3/ At the end of installation, say “yes” to have conda initializer. But that would set Anaconda python3 as your default python Logout and login again, you’ll enter the conda base environment. If you hate anaconda to change your default python and automatically activate base environment like me, run this command to remedy: conda config --set auto_activate_base false Create conda virtual environment: conda create -n myCondaEnv python=3.7 anaconda Activate environment conda activate myCondaEnv Intall packages to myCondaEnv, including conda install jupyterlab Configure Jupyter Up to this point, you are set to use ssh tunneling for remote connecting, but we can get around that by a few configurations for jupyter notebooks. Generate jupyter notebook configuration file jupyter notebook --generate-config This command creates a configuration file at $HOME/.jupyter/jupyter_notebook_config.py with all defaults commented out. Customize the config file Put the following lines to jupyter_notebook_config.py: c = get_config() c.NotebookApp.ip = &#39;*&#39; #use the system IP address for accessing c.NotebookApp.port = 8890 #if the specified port is occupied,incrementally get next one c.NotebookApp.open_browser = False #no browser from IPython.lib import passwd password = passwd(&quot;yourpassword&quot;) c.NotebookApp.password = password #use password instead of access token. To avoid hard-coding your password to a file, comment last three lines to disable password. Then Juypyter will generate a one-time token for accessing the jupyterlab instance. Run jupyterlab in the background nohup jupyter lab &amp; This command will run jupyterlab in the background, and the printouts will be forwarded to a generated file “nohup.out” in which you will see something like this [I 16:45:57.163 LabApp] http://yourIPorDomainName:8890/ This is your accesible link to the jupyter instance. Now you can safely logout the server. If you choose to use token for accessing, you’ll need to copy the full link with token to your browser. And the token will be used to set a cookie for your browser. Connect to remote jupyterlab Type http://yourIPorDomainName:8890/ or link with token in your browser. You’ll be asked to enter the password you have put into the jupyter config file on the server. Now enjoy working with the remote jupyterlab. As long as the server is running, you only need the link to access. Kill the process of jupyterlab if needed You might want to kill the process at some point. With this command you can find the pid of process for jupyterlab: netstat -tulpn | grep &#39;8890&#39; Then use top or kill command to end the process. Manage multiple environments in one Jupyter instance You’ll probably notice that starting a Jupyter instance for every environment is actually annoying, because we often times need to work on several projects with different settings. It is better that one can link conda environments to ipython kernels such that the environments can show up in one jupyter instance. For instance, I use miniconda3, and conda env list tells me following: base * /path/to/miniconda3 rdkit /path/to/miniconda3/envs/rdkit yolo /path/to/miniconda3/envs/yolo The idea is that when I start a jupyterlab instance in the base environment, I can also access rdkit and yolo envs. conda activate base conda install ipykernel ipython kernel install --user --name=yolo ipython kernel install --user --name=rdkit Next step is to make sure the ipython kernels are linked to the right envs, for example, in the json file .local/share/jupyter/kernels/rdkit/kernel.json, the first entry for argv should point to /path/to/miniconda3/envs/rdkit. If not, change that accordingly. Now rdkit and yolo will show up in jupyterlab. The end The method has been tested on RHEL7 and Debian servers. It also works for Windows Subsystems for Linux (WSL) Ubuntu 18.04. For downloading files from remote, besides scp, you can right click the file to create a downloadable link in jupyterlab. Hope you’ll find this guide helpful.","url":"http://localhost:4000/tech/2020/07/24/remote-jupyterlab.html","@type":"BlogPosting","headline":"Remote jupyterlab without SSH and sudo","dateModified":"2020-07-24T00:00:00+00:00","datePublished":"2020-07-24T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/tech/2020/07/24/remote-jupyterlab.html"},"author":{"@type":"Person","name":"Linlin Zhao | 恒道恒名 上下求索"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <div class="m-page-main">
        <div class="m-post">
    <div class="main js-main">
        <div class="col-1">
            <article itemscope itemtype="http://schema.org/BlogPosting">
                <meta itemprop="mainEntityOfPage" itemscope itemType="https://schema.org/WebPage"/>
                <header class="article-header">
                    <h1 itemprop="headline" itemprop="name headline">Remote jupyterlab without SSH and sudo</h1>
		    <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Linlin" />
                    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Remote jupyterlab without SSH and sudo | Linlin</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Remote jupyterlab without SSH and sudo" />
<meta name="author" content="Linlin Zhao | 恒道恒名 上下求索" />
<meta property="og:locale" content="EN" />
<meta name="description" content="Disclaimer: this guideline is only suggested for servers within secure local connections, e.g. within an institution or corporation’s network. SSH port forwarding is a common way of connecting to remote jupyter notebooks. This typically takes three steps: run jupyter on the server, ssh tunneling to the jupyter instance, and then type the localhost link to your browser. That actually doesn’t sound satisfying, and it could be simpler. In this post, I’ll guide you through setting up a remote jupyterlab workspace for Python3 from scratch. Since you want to set remote notebooks, I’ll assume you feel comfortable with command lines and remote editing. Check your python version on server As of 2020, Python3 is strongly recommended. If you are using RedHat Enterprise 7, the system-wide default version is Python2.7, but your system administrator usually should have installed python3. Suppose python3.6 is installed, you can enable python3 by scl enable rh-python36 bash. If you are using Debian or Ubuntu, python3 comes with the system. In case you want to make python3 as default, add the following line to your .bashrc file: alias python=python3 Manage python environments Working with python virtual environments is good practice. Here venv module and conda are briefly introduced, which use pip and conda as package manager respectively. This post from Anaconda summarizes the differences between pip and conda nicely. Note that pip and conda are direct competitors in terms of managing packages. Within a venv environment, doing pip install conda wouldn’t give you a standalone conda command for your venv environment. The venv way cd to your project directory, e.g. “myProject” Create virtual environments: python -m venv project-venv Activate the environments: source ./project-venv/bin/activate Install packages to the venv with pip, e.g. pip install jupyterlab To quit the venv: deactivate The conda way Go to home folder: cd $HOME Create a temporary folder to keep home folder clean: mkdir temp &amp;&amp; cd temp Get the anaconda or miniconda linux installer, e.g. for Anaconda3: wget https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh Install the downloaded: TMPDIR=./ bash ./Anaconda3-2020.07-Linux-x86_64.sh. Note that TMPDIR is specified to avoid permission issue caused by limited space of the default TMPDIR. Hit enter until you are asked to type “yes”. The default path is usually $HOME/anaconda3/ At the end of installation, say “yes” to have conda initializer. But that would set Anaconda python3 as your default python Logout and login again, you’ll enter the conda base environment. If you hate anaconda to change your default python and automatically activate base environment like me, run this command to remedy: conda config --set auto_activate_base false Create conda virtual environment: conda create -n myCondaEnv python=3.7 anaconda Activate environment conda activate myCondaEnv Intall packages to myCondaEnv, including conda install jupyterlab Configure Jupyter Up to this point, you are set to use ssh tunneling for remote connecting, but we can get around that by a few configurations for jupyter notebooks. Generate jupyter notebook configuration file jupyter notebook --generate-config This command creates a configuration file at $HOME/.jupyter/jupyter_notebook_config.py with all defaults commented out. Customize the config file Put the following lines to jupyter_notebook_config.py: c = get_config() c.NotebookApp.ip = &#39;*&#39; #use the system IP address for accessing c.NotebookApp.port = 8890 #if the specified port is occupied,incrementally get next one c.NotebookApp.open_browser = False #no browser from IPython.lib import passwd password = passwd(&quot;yourpassword&quot;) c.NotebookApp.password = password #use password instead of access token. To avoid hard-coding your password to a file, comment last three lines to disable password. Then Juypyter will generate a one-time token for accessing the jupyterlab instance. Run jupyterlab in the background nohup jupyter lab &amp; This command will run jupyterlab in the background, and the printouts will be forwarded to a generated file “nohup.out” in which you will see something like this [I 16:45:57.163 LabApp] http://yourIPorDomainName:8890/ This is your accesible link to the jupyter instance. Now you can safely logout the server. If you choose to use token for accessing, you’ll need to copy the full link with token to your browser. And the token will be used to set a cookie for your browser. Connect to remote jupyterlab Type http://yourIPorDomainName:8890/ or link with token in your browser. You’ll be asked to enter the password you have put into the jupyter config file on the server. Now enjoy working with the remote jupyterlab. As long as the server is running, you only need the link to access. Kill the process of jupyterlab if needed You might want to kill the process at some point. With this command you can find the pid of process for jupyterlab: netstat -tulpn | grep &#39;8890&#39; Then use top or kill command to end the process. Manage multiple environments in one Jupyter instance You’ll probably notice that starting a Jupyter instance for every environment is actually annoying, because we often times need to work on several projects with different settings. It is better that one can link conda environments to ipython kernels such that the environments can show up in one jupyter instance. For instance, I use miniconda3, and conda env list tells me following: base * /path/to/miniconda3 rdkit /path/to/miniconda3/envs/rdkit yolo /path/to/miniconda3/envs/yolo The idea is that when I start a jupyterlab instance in the base environment, I can also access rdkit and yolo envs. conda activate base conda install ipykernel ipython kernel install --user --name=yolo ipython kernel install --user --name=rdkit Next step is to make sure the ipython kernels are linked to the right envs, for example, in the json file .local/share/jupyter/kernels/rdkit/kernel.json, the first entry for argv should point to /path/to/miniconda3/envs/rdkit. If not, change that accordingly. Now rdkit and yolo will show up in jupyterlab. The end The method has been tested on RHEL7 and Debian servers. It also works for Windows Subsystems for Linux (WSL) Ubuntu 18.04. For downloading files from remote, besides scp, you can right click the file to create a downloadable link in jupyterlab. Hope you’ll find this guide helpful." />
<meta property="og:description" content="Disclaimer: this guideline is only suggested for servers within secure local connections, e.g. within an institution or corporation’s network. SSH port forwarding is a common way of connecting to remote jupyter notebooks. This typically takes three steps: run jupyter on the server, ssh tunneling to the jupyter instance, and then type the localhost link to your browser. That actually doesn’t sound satisfying, and it could be simpler. In this post, I’ll guide you through setting up a remote jupyterlab workspace for Python3 from scratch. Since you want to set remote notebooks, I’ll assume you feel comfortable with command lines and remote editing. Check your python version on server As of 2020, Python3 is strongly recommended. If you are using RedHat Enterprise 7, the system-wide default version is Python2.7, but your system administrator usually should have installed python3. Suppose python3.6 is installed, you can enable python3 by scl enable rh-python36 bash. If you are using Debian or Ubuntu, python3 comes with the system. In case you want to make python3 as default, add the following line to your .bashrc file: alias python=python3 Manage python environments Working with python virtual environments is good practice. Here venv module and conda are briefly introduced, which use pip and conda as package manager respectively. This post from Anaconda summarizes the differences between pip and conda nicely. Note that pip and conda are direct competitors in terms of managing packages. Within a venv environment, doing pip install conda wouldn’t give you a standalone conda command for your venv environment. The venv way cd to your project directory, e.g. “myProject” Create virtual environments: python -m venv project-venv Activate the environments: source ./project-venv/bin/activate Install packages to the venv with pip, e.g. pip install jupyterlab To quit the venv: deactivate The conda way Go to home folder: cd $HOME Create a temporary folder to keep home folder clean: mkdir temp &amp;&amp; cd temp Get the anaconda or miniconda linux installer, e.g. for Anaconda3: wget https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh Install the downloaded: TMPDIR=./ bash ./Anaconda3-2020.07-Linux-x86_64.sh. Note that TMPDIR is specified to avoid permission issue caused by limited space of the default TMPDIR. Hit enter until you are asked to type “yes”. The default path is usually $HOME/anaconda3/ At the end of installation, say “yes” to have conda initializer. But that would set Anaconda python3 as your default python Logout and login again, you’ll enter the conda base environment. If you hate anaconda to change your default python and automatically activate base environment like me, run this command to remedy: conda config --set auto_activate_base false Create conda virtual environment: conda create -n myCondaEnv python=3.7 anaconda Activate environment conda activate myCondaEnv Intall packages to myCondaEnv, including conda install jupyterlab Configure Jupyter Up to this point, you are set to use ssh tunneling for remote connecting, but we can get around that by a few configurations for jupyter notebooks. Generate jupyter notebook configuration file jupyter notebook --generate-config This command creates a configuration file at $HOME/.jupyter/jupyter_notebook_config.py with all defaults commented out. Customize the config file Put the following lines to jupyter_notebook_config.py: c = get_config() c.NotebookApp.ip = &#39;*&#39; #use the system IP address for accessing c.NotebookApp.port = 8890 #if the specified port is occupied,incrementally get next one c.NotebookApp.open_browser = False #no browser from IPython.lib import passwd password = passwd(&quot;yourpassword&quot;) c.NotebookApp.password = password #use password instead of access token. To avoid hard-coding your password to a file, comment last three lines to disable password. Then Juypyter will generate a one-time token for accessing the jupyterlab instance. Run jupyterlab in the background nohup jupyter lab &amp; This command will run jupyterlab in the background, and the printouts will be forwarded to a generated file “nohup.out” in which you will see something like this [I 16:45:57.163 LabApp] http://yourIPorDomainName:8890/ This is your accesible link to the jupyter instance. Now you can safely logout the server. If you choose to use token for accessing, you’ll need to copy the full link with token to your browser. And the token will be used to set a cookie for your browser. Connect to remote jupyterlab Type http://yourIPorDomainName:8890/ or link with token in your browser. You’ll be asked to enter the password you have put into the jupyter config file on the server. Now enjoy working with the remote jupyterlab. As long as the server is running, you only need the link to access. Kill the process of jupyterlab if needed You might want to kill the process at some point. With this command you can find the pid of process for jupyterlab: netstat -tulpn | grep &#39;8890&#39; Then use top or kill command to end the process. Manage multiple environments in one Jupyter instance You’ll probably notice that starting a Jupyter instance for every environment is actually annoying, because we often times need to work on several projects with different settings. It is better that one can link conda environments to ipython kernels such that the environments can show up in one jupyter instance. For instance, I use miniconda3, and conda env list tells me following: base * /path/to/miniconda3 rdkit /path/to/miniconda3/envs/rdkit yolo /path/to/miniconda3/envs/yolo The idea is that when I start a jupyterlab instance in the base environment, I can also access rdkit and yolo envs. conda activate base conda install ipykernel ipython kernel install --user --name=yolo ipython kernel install --user --name=rdkit Next step is to make sure the ipython kernels are linked to the right envs, for example, in the json file .local/share/jupyter/kernels/rdkit/kernel.json, the first entry for argv should point to /path/to/miniconda3/envs/rdkit. If not, change that accordingly. Now rdkit and yolo will show up in jupyterlab. The end The method has been tested on RHEL7 and Debian servers. It also works for Windows Subsystems for Linux (WSL) Ubuntu 18.04. For downloading files from remote, besides scp, you can right click the file to create a downloadable link in jupyterlab. Hope you’ll find this guide helpful." />
<link rel="canonical" href="http://localhost:4000/tech/2020/07/24/remote-jupyterlab.html" />
<meta property="og:url" content="http://localhost:4000/tech/2020/07/24/remote-jupyterlab.html" />
<meta property="og:site_name" content="Linlin" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-07-24T00:00:00+00:00" />
<script type="application/ld+json">
{"description":"Disclaimer: this guideline is only suggested for servers within secure local connections, e.g. within an institution or corporation’s network. SSH port forwarding is a common way of connecting to remote jupyter notebooks. This typically takes three steps: run jupyter on the server, ssh tunneling to the jupyter instance, and then type the localhost link to your browser. That actually doesn’t sound satisfying, and it could be simpler. In this post, I’ll guide you through setting up a remote jupyterlab workspace for Python3 from scratch. Since you want to set remote notebooks, I’ll assume you feel comfortable with command lines and remote editing. Check your python version on server As of 2020, Python3 is strongly recommended. If you are using RedHat Enterprise 7, the system-wide default version is Python2.7, but your system administrator usually should have installed python3. Suppose python3.6 is installed, you can enable python3 by scl enable rh-python36 bash. If you are using Debian or Ubuntu, python3 comes with the system. In case you want to make python3 as default, add the following line to your .bashrc file: alias python=python3 Manage python environments Working with python virtual environments is good practice. Here venv module and conda are briefly introduced, which use pip and conda as package manager respectively. This post from Anaconda summarizes the differences between pip and conda nicely. Note that pip and conda are direct competitors in terms of managing packages. Within a venv environment, doing pip install conda wouldn’t give you a standalone conda command for your venv environment. The venv way cd to your project directory, e.g. “myProject” Create virtual environments: python -m venv project-venv Activate the environments: source ./project-venv/bin/activate Install packages to the venv with pip, e.g. pip install jupyterlab To quit the venv: deactivate The conda way Go to home folder: cd $HOME Create a temporary folder to keep home folder clean: mkdir temp &amp;&amp; cd temp Get the anaconda or miniconda linux installer, e.g. for Anaconda3: wget https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh Install the downloaded: TMPDIR=./ bash ./Anaconda3-2020.07-Linux-x86_64.sh. Note that TMPDIR is specified to avoid permission issue caused by limited space of the default TMPDIR. Hit enter until you are asked to type “yes”. The default path is usually $HOME/anaconda3/ At the end of installation, say “yes” to have conda initializer. But that would set Anaconda python3 as your default python Logout and login again, you’ll enter the conda base environment. If you hate anaconda to change your default python and automatically activate base environment like me, run this command to remedy: conda config --set auto_activate_base false Create conda virtual environment: conda create -n myCondaEnv python=3.7 anaconda Activate environment conda activate myCondaEnv Intall packages to myCondaEnv, including conda install jupyterlab Configure Jupyter Up to this point, you are set to use ssh tunneling for remote connecting, but we can get around that by a few configurations for jupyter notebooks. Generate jupyter notebook configuration file jupyter notebook --generate-config This command creates a configuration file at $HOME/.jupyter/jupyter_notebook_config.py with all defaults commented out. Customize the config file Put the following lines to jupyter_notebook_config.py: c = get_config() c.NotebookApp.ip = &#39;*&#39; #use the system IP address for accessing c.NotebookApp.port = 8890 #if the specified port is occupied,incrementally get next one c.NotebookApp.open_browser = False #no browser from IPython.lib import passwd password = passwd(&quot;yourpassword&quot;) c.NotebookApp.password = password #use password instead of access token. To avoid hard-coding your password to a file, comment last three lines to disable password. Then Juypyter will generate a one-time token for accessing the jupyterlab instance. Run jupyterlab in the background nohup jupyter lab &amp; This command will run jupyterlab in the background, and the printouts will be forwarded to a generated file “nohup.out” in which you will see something like this [I 16:45:57.163 LabApp] http://yourIPorDomainName:8890/ This is your accesible link to the jupyter instance. Now you can safely logout the server. If you choose to use token for accessing, you’ll need to copy the full link with token to your browser. And the token will be used to set a cookie for your browser. Connect to remote jupyterlab Type http://yourIPorDomainName:8890/ or link with token in your browser. You’ll be asked to enter the password you have put into the jupyter config file on the server. Now enjoy working with the remote jupyterlab. As long as the server is running, you only need the link to access. Kill the process of jupyterlab if needed You might want to kill the process at some point. With this command you can find the pid of process for jupyterlab: netstat -tulpn | grep &#39;8890&#39; Then use top or kill command to end the process. Manage multiple environments in one Jupyter instance You’ll probably notice that starting a Jupyter instance for every environment is actually annoying, because we often times need to work on several projects with different settings. It is better that one can link conda environments to ipython kernels such that the environments can show up in one jupyter instance. For instance, I use miniconda3, and conda env list tells me following: base * /path/to/miniconda3 rdkit /path/to/miniconda3/envs/rdkit yolo /path/to/miniconda3/envs/yolo The idea is that when I start a jupyterlab instance in the base environment, I can also access rdkit and yolo envs. conda activate base conda install ipykernel ipython kernel install --user --name=yolo ipython kernel install --user --name=rdkit Next step is to make sure the ipython kernels are linked to the right envs, for example, in the json file .local/share/jupyter/kernels/rdkit/kernel.json, the first entry for argv should point to /path/to/miniconda3/envs/rdkit. If not, change that accordingly. Now rdkit and yolo will show up in jupyterlab. The end The method has been tested on RHEL7 and Debian servers. It also works for Windows Subsystems for Linux (WSL) Ubuntu 18.04. For downloading files from remote, besides scp, you can right click the file to create a downloadable link in jupyterlab. Hope you’ll find this guide helpful.","url":"http://localhost:4000/tech/2020/07/24/remote-jupyterlab.html","@type":"BlogPosting","headline":"Remote jupyterlab without SSH and sudo","dateModified":"2020-07-24T00:00:00+00:00","datePublished":"2020-07-24T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/tech/2020/07/24/remote-jupyterlab.html"},"author":{"@type":"Person","name":"Linlin Zhao | 恒道恒名 上下求索"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

                    <div class="m-article-data clearfix">
	
        <meta itemprop="author" itemscope itemtype="https://schema.org/Person">
            
                <meta itemprop="name" content="Linlin Zhao | 恒道恒名 上下求索"/>
            
        </meta>
	

	
	
        <ul class="inline-list tag-wrapper">
            
                <li><a class="round-rect-button"
                    href="/blog/all.html?tag=Jupyterlab">Jupyterlab
                </a></li>
            
                <li><a class="round-rect-button"
                    href="/blog/all.html?tag=Linux">Linux
                </a></li>
            
        </ul>
	
    <div class="other-wrapper">
        
        <div class="date-wrapper">
            
                <time class="article-meta" datetime="2020-07-24T00:00:00+00:00" itemprop="datePublished">
                    Jul 24, 2020
                </time>
            
        </div>
    </div>
</div>


                </header>
                <div class="m-article-content js-article-content" itemprop="articleBody">
                    <p><em>Disclaimer: this guideline is only suggested for servers within secure local connections, e.g. within an institution or corporation’s network</em>.</p>

<p><a href="https://www.ssh.com/ssh/tunneling/example">SSH port forwarding</a> is a common way of connecting to remote jupyter notebooks. This typically takes three steps: run jupyter on the server, ssh tunneling to the jupyter instance, and then type the localhost link to your browser. That actually doesn’t sound satisfying, and it could be simpler. In this post, I’ll guide you through setting up a remote jupyterlab workspace for Python3 from scratch. Since you want to set remote notebooks, I’ll assume you feel comfortable with command lines and remote editing.</p>

<h2 id="check-your-python-version-on-server">Check your python version on server</h2>
<p>As of 2020, Python3 is strongly recommended.</p>

<p>If you are using RedHat Enterprise 7, the system-wide default version is Python2.7, but your system administrator usually should have installed python3. Suppose python3.6 is installed, you can enable python3 by <code class="highlighter-rouge">scl enable rh-python36 bash</code>.</p>

<p>If you are using Debian or Ubuntu, python3 comes with the system. In case you want to make python3 as default, add the following line to your <code class="highlighter-rouge">.bashrc</code> file:
<code class="highlighter-rouge">alias python=python3</code></p>

<h2 id="manage-python-environments">Manage python environments</h2>
<p>Working with python <a href="https://realpython.com/python-virtual-environments-a-primer/">virtual environments</a> is good practice. 
Here <code class="highlighter-rouge">venv</code> module and <code class="highlighter-rouge">conda</code> are briefly introduced, which use <code class="highlighter-rouge">pip</code> and <code class="highlighter-rouge">conda</code> as package manager respectively. 
This <a href="https://www.anaconda.com/blog/understanding-conda-and-pip#:~:text=Pip%20installs%20Python%20packages%20whereas,software%20written%20in%20any%20language.&amp;text=Another%20key%20difference%20between%20the,the%20packages%20installed%20in%20them.">post</a> from Anaconda summarizes the differences between pip and conda nicely.
Note that <code class="highlighter-rouge">pip</code> and <code class="highlighter-rouge">conda</code> are direct competitors in terms of managing packages. Within a venv environment, doing <code class="highlighter-rouge">pip install conda</code> wouldn’t give you a standalone <code class="highlighter-rouge">conda</code> command for your venv environment.</p>

<h3 id="the-venv-way">The venv way</h3>
<ul>
  <li>cd to your project directory, e.g. “myProject”</li>
  <li>Create virtual environments: <code class="highlighter-rouge">python -m venv project-venv</code></li>
  <li>Activate the environments: <code class="highlighter-rouge">source ./project-venv/bin/activate</code></li>
  <li>Install packages to the venv with pip, e.g. <code class="highlighter-rouge">pip install jupyterlab</code></li>
  <li>To quit the venv: <code class="highlighter-rouge">deactivate</code></li>
</ul>

<h3 id="the-conda-way">The conda way</h3>
<ul>
  <li>Go to home folder: <code class="highlighter-rouge">cd $HOME</code></li>
  <li>Create a temporary folder to keep home folder clean: <code class="highlighter-rouge">mkdir temp &amp;&amp; cd temp</code></li>
  <li>Get the <a href="https://repo.anaconda.com/archive/">anaconda</a> or miniconda linux installer, e.g. for Anaconda3: <code class="highlighter-rouge">wget https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh</code></li>
  <li>Install the downloaded: <code class="highlighter-rouge">TMPDIR=./ bash ./Anaconda3-2020.07-Linux-x86_64.sh</code>. Note that <code class="highlighter-rouge">TMPDIR</code> is specified to avoid permission issue caused by limited space of the default TMPDIR.</li>
  <li>Hit enter until you are asked to type “yes”.</li>
  <li>The default path is usually <code class="highlighter-rouge">$HOME/anaconda3/</code></li>
  <li>At the end of installation, say “yes” to have conda initializer. But that would set Anaconda python3 as your default python</li>
  <li>Logout and login again, you’ll enter the conda base environment.</li>
  <li>If you hate anaconda to change your default python and automatically activate base environment like me, run this command to remedy: <code class="highlighter-rouge">conda config --set auto_activate_base false</code></li>
  <li>Create conda virtual environment: <code class="highlighter-rouge">conda create -n myCondaEnv python=3.7 anaconda</code></li>
  <li>Activate environment <code class="highlighter-rouge">conda activate myCondaEnv</code></li>
  <li>Intall packages to <code class="highlighter-rouge">myCondaEnv</code>, including <code class="highlighter-rouge">conda install jupyterlab</code></li>
</ul>

<h2 id="configure-jupyter">Configure Jupyter</h2>
<p>Up to this point, you are set to use ssh tunneling for remote connecting, but we can get around that by a few configurations for jupyter notebooks.</p>

<h3 id="generate-jupyter-notebook-configuration-file">Generate jupyter notebook configuration file</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jupyter notebook --generate-config
</code></pre></div></div>
<p>This command creates a configuration file at <code class="highlighter-rouge">$HOME/.jupyter/jupyter_notebook_config.py</code> with all defaults commented out.</p>
<h3 id="customize-the-config-file">Customize the config file</h3>
<p>Put the following lines to <code class="highlighter-rouge">jupyter_notebook_config.py</code>:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">c</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">()</span>
<span class="n">c</span><span class="o">.</span><span class="n">NotebookApp</span><span class="o">.</span><span class="n">ip</span> <span class="o">=</span> <span class="s">'*'</span> <span class="c">#use the system IP address for accessing </span>
<span class="n">c</span><span class="o">.</span><span class="n">NotebookApp</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="mi">8890</span> <span class="c">#if the specified port is occupied,incrementally get next one</span>
<span class="n">c</span><span class="o">.</span><span class="n">NotebookApp</span><span class="o">.</span><span class="n">open_browser</span> <span class="o">=</span> <span class="bp">False</span> <span class="c">#no browser</span>
<span class="kn">from</span> <span class="nn">IPython.lib</span> <span class="kn">import</span> <span class="n">passwd</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">passwd</span><span class="p">(</span><span class="s">"yourpassword"</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">NotebookApp</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">password</span> <span class="c">#use password instead of access token.  </span>
</code></pre></div></div>

<p>To avoid hard-coding your password to a file, comment last three lines to disable password. Then Juypyter will generate a one-time token for accessing the jupyterlab instance.</p>

<h2 id="run-jupyterlab-in-the-background">Run jupyterlab in the background</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nohup jupyter lab &amp;
</code></pre></div></div>
<p>This command will run jupyterlab in the background, and the printouts will be forwarded to a generated file “nohup.out” in which you will see something like this</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[I 16:45:57.163 LabApp] http://yourIPorDomainName:8890/
</code></pre></div></div>
<p>This is your accesible link to the jupyter instance. Now you can safely logout the server.</p>

<p>If you choose to use token for accessing, you’ll need to copy the full link with token to your browser. And the token will be used to set a <a href="https://jupyter-notebook.readthedocs.io/en/stable/security.html#:~:text=If%20a%20generated%20token%20doesn,notebook%20password%20command%20is%20added.">cookie</a> for your browser.</p>

<h2 id="connect-to-remote-jupyterlab">Connect to remote jupyterlab</h2>
<p>Type <code class="highlighter-rouge">http://yourIPorDomainName:8890/</code> or <code class="highlighter-rouge">link with token</code> in your browser.</p>

<p>You’ll be asked to enter the password you have put into the jupyter config file on the server.</p>

<p>Now enjoy working with the remote jupyterlab. As long as the server is running, you only need the link to access.</p>

<h2 id="kill-the-process-of-jupyterlab-if-needed">Kill the process of jupyterlab if needed</h2>
<p>You might want to kill the process at some point.
With this command you can find the <code class="highlighter-rouge">pid</code> of process for jupyterlab:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netstat -tulpn | grep '8890'
</code></pre></div></div>
<p>Then use <code class="highlighter-rouge">top</code> or <code class="highlighter-rouge">kill</code> command to end the process.</p>

<h2 id="manage-multiple-environments-in-one-jupyter-instance">Manage multiple environments in one Jupyter instance</h2>
<p>You’ll probably notice that starting a Jupyter instance for every environment is actually annoying, because we often times need to work on several projects with different settings. 
It is better that one can link conda environments to ipython kernels such that the environments can show up in one jupyter instance. For instance, I use miniconda3, and <code class="highlighter-rouge">conda env list</code> tells me following:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>base                  *  /path/to/miniconda3
rdkit                    /path/to/miniconda3/envs/rdkit
yolo                     /path/to/miniconda3/envs/yolo
</code></pre></div></div>
<p>The idea is that when I start a jupyterlab instance in the base environment, I can also access <code class="highlighter-rouge">rdkit</code> and <code class="highlighter-rouge">yolo</code> envs.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda activate base
conda install ipykernel
ipython kernel install <span class="nt">--user</span> <span class="nt">--name</span><span class="o">=</span>yolo
ipython kernel install <span class="nt">--user</span> <span class="nt">--name</span><span class="o">=</span>rdkit
</code></pre></div></div>
<p>Next step is to make sure the ipython kernels are linked to the right envs, for example, in the json file <code class="highlighter-rouge">.local/share/jupyter/kernels/rdkit/kernel.json</code>, the first entry for <code class="highlighter-rouge">argv</code> should point to <code class="highlighter-rouge">/path/to/miniconda3/envs/rdkit</code>. If not, change that accordingly.</p>

<p>Now <code class="highlighter-rouge">rdkit</code> and <code class="highlighter-rouge">yolo</code> will show up in jupyterlab.</p>

<h2 id="the-end">The end</h2>
<ul>
  <li>The method has been tested on RHEL7 and Debian servers.</li>
  <li>It also works for Windows Subsystems for Linux (WSL) Ubuntu 18.04.</li>
  <li>For downloading files from remote, besides <code class="highlighter-rouge">scp</code>, you can right click the file to create a downloadable link in jupyterlab.</li>
</ul>

<p>Hope you’ll find this guide helpful.</p>

                </div>
                <footer>
                    
                        <meta itemprop="dateModified" content="2020-07-24T00:00:00+00:00">
                    
                    <div class="article-license">
                        <div class="m-license">
    <div class="clearfix">
        
        <a class="octocat" href="https://github.com/linlinzhao/linlinzhao.github.io/tree/master/_posts/2020-07-24-remote-jupyterlab.md">
            <img alt="View on Github" src="/statics/images/octocat.jpg" />
        </a>
        <p><a href="https://github.com/linlinzhao/linlinzhao.github.io/tree/master/_posts/2020-07-24-remote-jupyterlab.md">View this POST on Github</a>.</P>
        
        <p>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-SA-4.0</a> license.</p>
        <a class="license" rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
            <img alt="Creative Commons License" src="/statics/images/license-cc4.png" />
        </a>
        <p>欢迎转载，转载需注明出处：<a class="url" href="http://localhost:4000/tech/2020/07/24/remote-jupyterlab.html">
            http://localhost:4000/tech/2020/07/24/remote-jupyterlab.html
        </a></p>
    </div>
</div>

                    </div>
                </footer>
                <section></section><div class="article__previous-next clearfix"><div class="next"><span></span><a href="/stats/2018/08/25/bayesian2-univariant-gaussian.html">Bayesian basics II - Inference for univariate Gaussian, Maximum a Posteriori vs Maximum likelihood</a></div></div></article>
        </div>
        <div class="col-2">
            <aside class="js-article-aside">
                <div class="m-toc js-toc"></div>
            </aside>
        </div>
    </div>
</div>



<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script src="//cdn.bootcss.com/toc/0.3.2/toc.min.js"></script>
<script type="text/javascript">
    window.throttle = function(func, wait) {
        var args,
            result,
            thisArg,
            timeoutId,
            lastCalled = 0;

        function trailingCall() {
            lastCalled = new Date;
            timeoutId = null;
            result = func.apply(thisArg, args);
        }
        return function() {
            var now = new Date,
                remaining = wait - (now - lastCalled);

            args = arguments;
            thisArg = this;

            if (remaining <= 0) {
                clearTimeout(timeoutId);
                timeoutId = null;
                lastCalled = now;
                result = func.apply(thisArg, args);
            }
            else if (!timeoutId) {
                timeoutId = setTimeout(trailingCall, remaining);
            }
            return result;
        };
    }
    $(function() {
        var $window = $(window);
        var $pageStage = $('.js-page-stage');
        var $pageMain = $('.js-main');
        var $pageFooter = $('.js-page-footer');
        var $articleContent = $('.js-article-content');
        var $articleAside = $('.js-article-aside');
        var $toc = $('.js-toc');
        var hasTitle = $articleContent.find('h1, h2, h3').length > 0;

        function asideSticky() {
            return $window.outerWidth() > 1150 && $pageStage.hasClass('has-toc');
        }
        function setTocClass() {
            if (hasTitle) {
                !$pageStage.hasClass('has-toc') && $pageStage.addClass('has-toc');
            }
        }

        setTocClass();

        function setAsideTOC() {
            var asideTop,
                asideLeft,
                scrollBottom,
                asideBottomTop,
                lastScrollTop;

            function init() {
                var asideOffset = $articleAside.offset();
                var footerOffset = $pageFooter.offset();
                var mainOffset = $pageMain.offset();
                asideTop = mainOffset.top;
                asideHeight = $toc.outerHeight() + parseInt($articleAside.css('padding-top'), 10) + parseInt($articleAside.css('padding-bottom'), 10);
                asideLeft = mainOffset.left + $pageMain.outerWidth() - $articleAside.outerWidth() - parseInt($pageMain.css('padding-right'), 10);
                scrollBottom = footerOffset.top - asideHeight;
                asideBottomTop = scrollBottom - mainOffset.top;
            }
            function setAside(force) {
                force !== true && (force = false);
                var scrollTop = $window.scrollTop();
                if (scrollTop >= asideTop && scrollTop <= scrollBottom) {
                    (!force && lastScrollTop >= asideTop && lastScrollTop <= scrollBottom) ||
                        $articleAside.addClass('fixed').css({
                            left: asideLeft + 'px',
                            top: 0
                        });
                } else if (scrollTop < asideTop) {
                    (!force && lastScrollTop < asideTop) ||
                        $articleAside.removeClass('fixed').css({
                            left: 0,
                            top: 0
                        });
                } else {
                    (!force && lastScrollTop > scrollBottom) ||
                        $articleAside.removeClass('fixed').css({
                            left: 0,
                            top: asideBottomTop + 'px'
                        });
                }
                lastScrollTop = scrollTop;
            }
            asideSticky() && (init(), setAside());
            $window.on('scroll', function() {
                asideSticky() && setAside();
            });
            $window.on('resize', throttle(function() {
                setTocClass();
                asideSticky() && (init(), setAside(true));
            }, 100));
            setTimeout(init, 4000);
        }
        setTimeout(setAsideTOC, 1000);

        $toc.toc({
            'selectors': 'h1,h2,h3',
            'container': '.js-article-content',
        });
    });
</script>





    </div>
</div>

        </div>
        <div class="m-page-footer js-page-footer">
    <div class="main">
        <aside>
            <div class="follow-me">
    <ul class="inline-list" itemscope itemtype="http://schema.org/Person">
        <meta itemprop="name" content="Linlin Zhao | 恒道恒名 上下求索">
        <link itemprop="url" href="http://localhost:4000/">
        
        
        
        
        
            <li title="Follow me on Github.">
                <div class="round-button github">
                    <a itemprop="sameAs" href="https://github.com/linlinzhao" target="_blank">
                        <div class="icon"><svg fill="#000000" width="24px" height="24px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <path class="svgpath" data-index="path_0" fill="#272636" d="M0 525.2c0 223.6 143.3 413.7 343 483.5 26.9 6.8 22.8-12.4 22.8-25.4l0-88.7c-155.3 18.2-161.5-84.6-172-101.7-21.1-36-70.8-45.2-56-62.3 35.4-18.2 71.4 4.6 113.1 66.3 30.2 44.7 89.1 37.2 119 29.7 6.5-26.9 20.5-50.9 39.7-69.6C248.8 728.2 181.7 630 181.7 513.2c0-56.6 18.7-108.7 55.3-150.7-23.3-69.3 2.2-128.5 5.6-137.3 66.5-6 135.5 47.6 140.9 51.8 37.8-10.2 80.9-15.6 129.1-15.6 48.5 0 91.8 5.6 129.8 15.9 12.9-9.8 77-55.8 138.8-50.2 3.3 8.8 28.2 66.7 6.3 135 37.1 42.1 56 94.6 56 151.4 0 117-67.5 215.3-228.8 243.7 26.9 26.6 43.6 63.4 43.6 104.2l0 128.8c0.9 10.3 0 20.5 17.2 20.5C878.1 942.4 1024 750.9 1024 525.3c0-282.9-229.3-512-512-512C229.1 13.2 0 242.3 0 525.2L0 525.2z" />
</svg>
</div>
                    </a>
                </div>
            </li>
        
        
        
    </ul>
    
        <p class="email">
            <a title="Send me Email." href="mailto:linlinzhao.c@gmail.com" target="_self"> linlinzhao.c@gmail.com </a>
        </p>
    
</div>

        </aside>
        <footer class="site-info">
            <p>© Linlin 2015 - 2020</p>
            <p>Powered by <a
                title="Jekyll is a simple, blog-aware, static site generator." href="http://jekyllrb.com/">Jekyll</a> & <a
                title="TeXt is a succinct theme for blogging." href="https://github.com/kitian616/jekyll-TeXt-theme">TeXt Theme</a>.
            </p>
        </footer>
    </div>
</div>

        <script>
            $(function() {
                // display coding language //
                $(".highlight").each(function() {
                    $(this).attr("data-lang", $(this).find("code").attr("data-lang"));
                });
            });
        </script>
        
    </body>
</html>
